# 😱 \[Chapter 4] 스트림 소개

## 1. 스트림이란 무엇인가?

* 스트림은 자바 8 API에 새로 추가된 기능
* 스트림을 이용하면 선언형(즉, 데이터를 처리하는 임시 구현 코드 대신 질의로 표현 가능)으로 컬렉션 데이터를 처리할 수 있음
* 스트림을 이용하면 멀티스레드 코드를 구현하지 않아도 데이터를 투명하게 병렬로 처리할 수 있음

### 예제

{% embed url="https://gist.github.com/SulimChoi/2246e6396450eb56369e619b44340cbf" %}
저칼로리의 요리명을 반환하고, 칼로리를 기준으로 요리를 정렬하는 자바 7 코드
{% endembed %}

* `lowCaloricDishes`라는 '가비지 변수'를 사용
* `lowCaloricDishes`는 컨테이너 역할만 하는 중간 변수
* 자바 8에서는 세부 구현은 라이브러리 내에서 모두 처리

{% embed url="https://gist.github.com/SulimChoi/0a9c3b4ba8f0410b65ec5b221ff5f20b" %}
저칼로리의 요리명을 반환하고, 칼로리를 기준으로 요리를 정렬하는 자바 8 코드
{% endembed %}

* `stream()`을 `parallelStream()`으로 바꾸면 멀티코어 아키텍처에서 병렬로실행할수있음

### 스트림의 장점

*   **선언형으로 코드 구현 가능**

    루프와 if 조건문 등의 제어 블록을 사용할 필요 없이 '저칼로리의 요리만 선택하라' 같은 동작의 수행을 지정할 수 있음. 즉, 기존 코드를 복사해 붙여넣는 방식이 아닌 람다 표현식을 이용해 저칼로리 대신 고칼로리의 요리만 필터링하는 코드도 쉽게 구현 가능
*   여러 빌딩 블록 연산을 연결해 복잡한 **데이터 처리 파이프 라인을 만들 수 있음**

    여러 연산을 파이프 라인으로 연결해도 가독성과 명확성이 유지됨

> **자바 8의 스트림 API 특징**
>
> * 선언형: 더 간결하고 가독성이 좋아짐.
> * 조립할 수 있음: 유연성이 좋아짐
> * 병렬화: 성능이 좋아



### 앞으로 사용할 예제 코드

{% embed url="https://gist.github.com/SulimChoi/fb43db86b0ae9e7f0a8db1491e21806b" %}
Menu 예제
{% endembed %}

## 2. 스트림 시작하기

* 자바 8 컬렉션에는 스트림을 반환하는 stream 메서드가 추가됨 ([스트림 인터페이스 정의](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html))
* **스트림**: 데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소(Sequence of elements)
  * **연속된 요소**: 특정 요소 형식으로 이루어진 연속된 값 집합의 인터페이스를 제공. 컬렉션에서는 시간과 공간의 복잡성과 관련된 요소 저장 및 접근 연산을 제공하지만, 스트림에서는 `filter`, `sorted`, `map`처럼 표현 계산식을 제공. **컬렉션에서의 주제는 데이터이고 스트림의 주제는 계산**
  * **소스**: 컬렉션, 배열, IO 자원 등의 데이터 제공 소스로부터 데이터를 소비. 정렬된 컬렉션으로 스트림을 생성하면 정렬이 그대로 유지됨. 즉, 리스트로 스트림을 만들면 스트림의 요소는 리스트의 요소와 같은 순서를 유지
  * **데이터 처리 연산**: 함수형 프로그래밍 언어에서 일반적으로 지원하는 연산과 데이터베이스와 비슷한 연산을 지원. 연산은 순차적으로 또는 병렬로 실행할 수 있음

> **스트림의 특징**
>
> * 파이프라이닝(Pipelining): 스트림 연산끼리 연결해 커다란 파이프라인을 구성할 수 있도록 스트림 자신을 반환. 연산 파이프라인은 데이터 소스에 적용하는 데이터베이스 질의와 비슷
> * 내부 반복: 반복자를 이용해 명시적으로 반복하는 컬렉션과 달리 스트림은 내부 반복&#x20;

